<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Login no Chat</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
</head>
<body>
  <h2>Entre no Chat</h2>
  <input type="email" id="email" placeholder="Digite seu email" value="mietiam@hotmail.com"><br>
  <input type="password" id="senha" placeholder="Digite sua senha"><br><br>
  <button onclick="entrarOuRegistrar()">Entrar / Registrar</button>
  <p id="msg"></p>

  <script>
    // Config Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAb3NOMIUO-zQ9QaGIXwV8ty38cN9Yl2Gg",
      authDomain: "chat-on-1-4f38f.firebaseapp.com",
      projectId: "chat-on-1-4f38f",
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    function entrarOuRegistrar() {
      const email = document.getElementById("email").value.trim();
      const senha = document.getElementById("senha").value.trim();
      const msg = document.getElementById("msg");

      if (!email || !senha) {
        msg.textContent = "‚ö†Ô∏è Email e senha s√£o obrigat√≥rios.";
        return;
      }

      // Tenta login
      auth.signInWithEmailAndPassword(email, senha)
        .then(() => {
          msg.textContent = "‚úÖ Login bem-sucedido!";
          // redirecionar ou exibir chat
        })
        .catch((error) => {
          if (error.code === 'auth/user-not-found') {
            // Cria novo usu√°rio se n√£o existir
            auth.createUserWithEmailAndPassword(email, senha)
              .then(() => {
                msg.textContent = "üë§ Usu√°rio criado com sucesso!";
              })
              .catch((e) => {
                msg.textContent = "Erro ao registrar: " + e.message;
              });
          } else if (error.code === 'auth/wrong-password') {
            msg.textContent = "‚ùå Senha incorreta.";
          } else {
            msg.textContent = "Erro: " + error.message;
          }
        });
    }
  </script>
</body>
</html>
